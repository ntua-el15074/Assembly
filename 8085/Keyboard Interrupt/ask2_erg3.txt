INIT:
    IN 10H                          ;Απενεργοποιούμε την προστασία μνήμης
    MVI A,DOH                       ;Αρχικοποιούμε την μάσκα διακοπής
    SIM
    EI                              ;Ενεργοποίηση μάσκας διακοπής

    MVI A,1OH                       ;Αρχικοποίηση display
    STA 0BF0H                       ;Για κάθε θέση του 7 segment display
    STA 0BF1H
    STA 0BF2H
    STA 0BF3H
    STA 0BF4H
    STA 0BF5H
    MVI D,64H                       ;Το Κ1 είναι 100 για το παρόν παράδειγμα
    MVI E,B0H                       ;Το Κ2 είναι 176 για το παρόν παράδειγμα

INTR_ROUTINE:                       ;Ρουτίνα που ενεργοποιείται στην περίπτωση διακοπής
    EI                              ;Επιτρέπουμε την διακοπή μέσα στην ρουτίνα διακοπής
    CALL KIND                       ;Δεχόμαστε δεδομένα από το πληκτρολόγιο για το δεκαεξαδικο 
    STA 0BF4H                       ;Τοποθετούμε ότι διαβάστηκε από το πληκτρολόγιο στο 7 segment display
    MOV H,A                         ;και το αποθηκεύουμε
    CALL KIND                       ;Δεχόμαστε το δεύτερο δεδομένο του αριθμού
    STA 0BF3H                       ;Τοποθετούμε ότι διαβάστηκε από το πληκτρολόγιο στο 7 segment display
    RLC                             ;4 αριστερές στροφές για να πάει το MSB στη θέση που επιθυμούμε
    RLC
    RLC
    RLC
    ORA H                           ;A = A OR H για να προκύψει όλος ο αριθμός
    CALL DISPLAY                    ;Κλήση της ρουτίνας display

    CPI 00H                         ;Έλεγχος με το μηδέν
    JZ 0_K1                         ;Αν είναι ίσο με το μηδέν τότε θα πάμε στο διάστημα 0 με Κ1
    CMP D                           ;Έλεγχος με το Κ1
    JC 0_K1                         ;Αν είναι μικρότερο από το Κ1 τότε θα πάμε στο διάστημα 0 με Κ1
    JZ 0_K1                         ;Αν είναι ίσο με το K1 τότε θα πάμε στο διάστημα 0 με Κ1
    CMP E                           ;Έλεγχος με το Κ2
    JC K1_K2                        ;Αν είναι μικρότερο από το Κ2 τότε θα πάμε στο διάστημα Κ1 με Κ2
    JZ K1_K2                        ;Αν είναι ίσο με Κ2 τότε θα πάμε στο διάστημα Κ1 με Κ2 
    JMP K2_255                      ;Αλλιώς θα πάμε στο διάστημα Κ2 με 255

0_K1:
    MVI A,FBH
    STA 3000H
    JMP LOOP

K1_K2:
    MVI A,FDH
    STA 3000H
    JMP LOOP

K2_255:
    MVI A,FEH
    STA 3000H
    JMP LOOP

DISPLAY:
    PUSH PSW
    PUSH H
    PUSH D
    PUSH B
    LXI B,OBF0H
    CALL STDM
    CALL DCD
    PUSH B
    PUSH D
    PUSH H
    PUSH PSW
    RET

LOOP:
    JMP LOOP
